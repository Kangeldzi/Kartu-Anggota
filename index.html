<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>Kartu Digital Anggota</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

<style>
body {
  margin: 0;
  background: linear-gradient(180deg, #061b12, #020b07);
  font-family: 'Poppins', sans-serif;
  display: flex;
  justify-content: center;
  padding: 16px;
  color: #fff;
}

.card {
  width: 100%;
  max-width: 390px;
  background: linear-gradient(160deg, #0f3d28, #062015);
  border-radius: 22px;
  padding: 18px;
  box-shadow: 0 0 35px rgba(0, 255, 160, .35);
  border: 1px solid rgba(0, 255, 160, .35);
}

.header {
  text-align: center;
  border-bottom: 1px dashed rgba(255, 255, 255, .25);
  padding-bottom: 14px;
}

.logo-wrap {
  width: 86px;
  height: 86px;
  margin: 0 auto 10px;
  border-radius: 50%;
  background: rgba(255, 255, 255, .12);
  backdrop-filter: blur(12px);
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 0 18px rgba(0, 255, 160, .6), inset 0 0 12px rgba(255, 255, 255, .25);
  transition: .4s ease;
  animation: float 4s ease-in-out infinite;
}

.logo-wrap:hover {
  transform: scale(1.08);
  box-shadow: 0 0 28px rgba(0, 255, 160, .9);
}

.logo-wrap img {
  width: 58px;
  height: 58px;
  border-radius: 50%;
}

@keyframes float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-6px); }
}

.header h1 {
  font-size: 16px;
  margin: 0;
  font-weight: 700;
  color: #7dffb2;
}

.header small {
  font-size: 11px;
  opacity: .85;
}

.status {
  margin: 12px auto;
  text-align: center;
}

.status span {
  padding: 6px 18px;
  border-radius: 20px;
  background: #00ff9d33;
  color: #00ff9d;
  font-size: 12px;
  font-weight: 600;
}

.status-inactive {
  background: #ff3d0033 !important;
  color: #ffa000 !important;
}

.identity {
  text-align: center;
  margin: 14px 0;
}

.identity h2 {
  margin: 4px 0;
  font-size: 17px;
}

.identity p {
  margin: 0;
  font-size: 12px;
  color: #a9ffd1;
}

.stats {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 10px;
  margin: 16px 0;
}

.stat {
  background: rgba(0, 255, 160, .15);
  border-radius: 14px;
  padding: 10px;
  text-align: center;
}

.stat small {
  font-size: 10px;
  opacity: .9;
}

.stat b {
  display: block;
  margin-top: 6px;
  font-size: 13px;
}

.data {
  font-size: 12px;
}

.data div {
  display: flex;
  justify-content: space-between;
  padding: 7px 0;
  border-bottom: 1px dashed rgba(255, 255, 255, .25);
}

.data span {
  color: #b6ffd9;
}

.actions {
  display: flex;
  gap: 12px;
  margin: 18px 0 6px;
}

.actions button {
  flex: 1;
  border: none;
  padding: 10px;
  border-radius: 14px;
  background: rgba(0, 255, 160, .2);
  color: #00ff9d;
  font-weight: 600;
  backdrop-filter: blur(10px);
  box-shadow: 0 0 14px rgba(0, 255, 160, .5);
  transition: .3s;
}

.actions button:hover {
  background: #00ff9d;
  color: #003a24;
  transform: translateY(-2px);
}

.footer {
  margin-top: 10px;
  text-align: center;
  font-size: 10px;
  opacity: .75;
}

.loading {
  text-align: center;
  padding: 30px;
}

.spinner {
  width: 40px;
  height: 40px;
  border: 3px solid rgba(0, 255, 160, .3);
  border-top: 3px solid #00ff9d;
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin: 0 auto 15px;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.last-update {
  font-size: 9px;
  text-align: center;
  margin-top: 5px;
  opacity: .6;
}
</style>
</head>

<body>
<div class="card" id="cardContent">
  <div class="loading" id="loading">
    <div class="spinner"></div>
    <p>Memuat data anggota...</p>
  </div>
  
  <div id="content" style="display:none;">
    <div class="header">
      <div class="logo-wrap">
        <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhADAiDm28b0fescUKnqADc9uk3Q2oIptWD-hyzBQXb2AMtoPrxb7Q9Ecr9SDV_RhqA9uWO6qTcepfbfuR7KFWuKUmYYPB-6JfiExBCzT-MljhNh1P1TPsabKvh2rAQzEtZUA0lpiIkIuBxHvHVuXl0GdUWEyaABcfpsHnX_kyDLN_pS2gVNzp_kIP6Vss/s1280/1000007204.jpg">
      </div>
      <h1>KOPERASI ASMARA TANI</h1>
      <small>Kartu Anggota Digital (Mobile-Only)</small>
    </div>

    <div class="status">
      <span id="statusText">AKTIF</span>
    </div>

    <div class="identity">
      <h2 id="nama">Kang L</h2>
      <p id="nia">NIA : KOP-001</p>
    </div>

    <div class="stats">
      <div class="stat"><small>Simpanan Pokok</small><b id="pokok">Rp 0</b></div>
      <div class="stat"><small>Simpanan Wajib</small><b id="wajib">Rp 0</b></div>
      <div class="stat"><small>Simpanan Sukarela</small><b id="sukarela">Rp 0</b></div>
    </div>

    <div class="data">
      <div><span>Alamat</span><b id="alamat">Pamijahan, Bogor</b></div>
      <div><span>Jenis Kelamin</span><b id="jk">Laki-laki</b></div>
      <div><span>Agama</span><b id="agama">Islam</b></div>
      <div><span>NIK</span><b id="nik">3201171212810011</b></div>
      <div><span>Email</span><b id="email">anggota@email.com</b></div>
      <div><span>Telepon</span><b id="telepon">085218483129</b></div>
      <div><span>Tanggal Daftar</span><b id="tglDaftar">18-09-2025</b></div>
      <div><span>Total Simpanan</span><b id="totalSimpanan">Rp 0</b></div>
      <div><span>Total Pinjaman</span><b id="totalPinjaman">Rp 0</b></div>
      <div><span>Estimasi SHU</span><b id="shu">Rp 0</b></div>
    </div>

    <div class="actions">
      <button onclick="window.print()">Cetak</button>
      <button onclick="exportPDF()">Export PDF</button>
    </div>

    <div class="footer">
      Data tersinkronisasi dari Dashboard Admin<br>
      Â© Koperasi Asmara Tani 2026
      <div class="last-update" id="lastUpdate">Terakhir update: -</div>
    </div>
  </div>
</div>

<script src="data.js"></script>

<script>
function formatRupiah(angka) {
  if (!angka && angka !== 0) return 'Rp 0';
  return 'Rp ' + angka.toString().replace(/\B(?=(\d{3})+(?!\d))/g, '.');
}

function formatDate(dateString) {
  if (!dateString) return '-';
  return dateString;
}

function getParameterByName(name) {
  const url = new URL(window.location.href);
  return url.searchParams.get(name);
}

function loadMemberData() {
  try {
    const memberId = getParameterByName('id') || 'KOP-001';
    const memberData = MEMBERS_DATA.find(m => m.ID === memberId) || MEMBERS_DATA[0];
    updateUI(memberData);
    document.getElementById('loading').style.display = 'none';
    document.getElementById('content').style.display = 'block';
  } catch (error) {
    console.error('Error:', error);
    document.getElementById('loading').innerHTML = '<p style="color:red;">Error loading data</p>';
  }
}

function updateUI(data) {
  if (!data) return;
  
  document.getElementById('nama').textContent = data.Nama || '-';
  document.getElementById('nia').textContent = 'NIA : ' + (data.ID || '-');
  document.getElementById('statusText').textContent = data.Status || 'AKTIF';
  
  if (data.Status === 'TIDAK AKTIF') {
    document.getElementById('statusText').className = 'status-inactive';
  }
  
  document.getElementById('pokok').textContent = formatRupiah(data['Simpanan Pokok'] || 0);
  document.getElementById('wajib').textContent = formatRupiah(data['Simpanan Wajib'] || 0);
  document.getElementById('sukarela').textContent = formatRupiah(data['Simpanan Sukarela'] || 0);
  
  document.getElementById('alamat').textContent = data.Alamat || '-';
  document.getElementById('jk').textContent = data['Jenis Kelamin'] || '-';
  document.getElementById('agama').textContent = data.Agama || '-';
  document.getElementById('nik').textContent = data.NIK || '-';
  document.getElementById('email').textContent = data.Email || '-';
  document.getElementById('telepon').textContent = data.WhatsApp || '-';
  document.getElementById('tglDaftar').textContent = formatDate(data['Tanggal Bergabung']);
  
  const totalSimpanan = (parseFloat(data['Simpanan Pokok']) || 0) + 
                       (parseFloat(data['Simpanan Wajib']) || 0) + 
                       (parseFloat(data['Simpanan Sukarela']) || 0);
  
  document.getElementById('totalSimpanan').textContent = formatRupiah(totalSimpanan);
  document.getElementById('totalPinjaman').textContent = formatRupiah(data['Total Pinjaman'] || 0);
  document.getElementById('shu').textContent = formatRupiah(data['SHU Estimasi'] || 0);
  
  if (data.Foto) {
    document.querySelector('.logo-wrap img').src = data.Foto;
  }
  
  document.getElementById('lastUpdate').textContent = 
    'Terakhir update: ' + new Date().toLocaleString('id-ID');
}

function exportPDF() {
  window.print();
}

document.addEventListener('DOMContentLoaded', loadMemberData);
</script>
</body>
</html>
